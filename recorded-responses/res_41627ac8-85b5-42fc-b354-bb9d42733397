zk.load('zul.wgt,zul.lang,zk.fmt',function(){if(zk._p=zkpi('zul.inp'))try{
(function(){function f(j,i,k){var h={value:i,start:zk(j.getInputNode()).getSelectionRange()[0]};if(k){h.bySelectBack=true}return h}function g(h){c(h);h._tidChg=setTimeout(h.proxy(b),zul.inp.InputWidget.onChangingDelay)}function c(i,h){if(i._tidChg){clearTimeout(i._tidChg);i._tidChg=null}if(h){if(zul.inp.InputWidget.onChangingForced&&i.isListen("onChanging")){b.call(i,-1)}a(i)}}function a(h){h._lastChg=h.valueEnter_=h.valueSel_=null}function b(j){var i=this.getInputNode(),k=this.valueEnter_||i.value;if(this._lastChg!=k){this._lastChg=k;var h=this.valueSel_;this.valueSel_=null;this.fire("onChanging",f(this,k,h==k),{ignorable:1,rtags:{onChanging:1}},j||5)}}var e=zk.ie?function(){return true}:zk.opera?function(h){return h==32||h>46}:function(h){return h>=32};zul.inp.Renderer={renderSpinnerButton:function(h,i){}};var d=zul.inp.InputWidget=zk.$extends(zul.Widget,{_maxlength:0,_cols:0,_type:"text",$define:{name:function(h){var i=this.getInputNode();if(i){i.name=h}},disabled:function(h){var i=this.getInputNode();if(i){i.disabled=h;var j=this.getZclass(),k=h?"addClass":"removeClass";jq(this.$n())[k](j+"-disd");jq(i)[k](j+"-text-disd")}},readonly:function(h){var j=this.getInputNode();if(j){var k=this.getZclass(),l=h?"addClass":"removeClass";j.readOnly=h;jq(this.$n())[l](k+"-real-readonly");jq(j)[l](k+"-readonly");if(!this.inRoundedMold()){return}var i=this.$n("btn");jq(i)[l](k+"-btn-readonly");if(zk.ie6_){jq(i)[l](k+(this._buttonVisible?"-btn-readonly":"-btn-right-edge-readonly"))}}},cols:function(i){var h=this.getInputNode();if(h){if(this.isMultiline()){h.cols=i}else{h.size=i}}},maxlength:function(h){var i=this.getInputNode();if(i&&!this.isMultiline()){i.maxLength=h}},tabindex:function(h){var i=this.getInputNode();if(i){i.tabIndex=h||""}},inplace:function(h){this.rerender()}},getInplaceCSS:function(){return this._inplace?this.getZclass()+"-inplace":""},select:function(i,h){zk(this.getInputNode()).setSelectionRange(i,h)},getType:function(){return this._type},isMultiline:function(){return false},inRoundedMold:function(){return this._mold=="rounded"},getText:function(){return this.coerceToString_(this.getValue())},setText:function(h){this.setValue(this.coerceFromString_(h))},getValue:function(){return this._value},setValue:function(j,h){var k;if(h){this.clearErrorMessage(true)}else{if(j==this._lastRawValVld){return}k=this._validate(j);j=k.value}a(this);if((!k||!k.error)&&(h||!this._equalValue(this._value,j))){this._value=j;var i=this.getInputNode();if(i){this._defValue=this._lastChg=i.value=j=this.coerceToString_(j)}}},set_value:function(i,h){this.setValue(this.unmarshall_(i),h)},getInputNode:_zkf=function(){return this.$n("real")||this.$n()},getTextNode:_zkf,domAttrs_:function(i){var h=this.$supers("domAttrs_",arguments);if(!i||!i.text){h+=this.textAttrs_()}return h},textAttrs_:function(){var i="",h;if(this.isMultiline()){h=this._cols;if(h>0){i+=' cols="'+h+'"'}}else{i+=' value="'+this._areaText()+'"';i+=' type="'+this._type+'"';h=this._cols;if(h>0){i+=' size="'+h+'"'}h=this._maxlength;if(h>0){i+=' maxlength="'+h+'"'}}h=this._tabindex;if(h){i+=' tabindex="'+h+'"'}h=this._name;if(h){i+=' name="'+h+'"'}if(this._disabled){i+=' disabled="disabled"'}if(this._readonly){i+=' readonly="readonly"'}var j=jq.filterTextStyle(this.domStyle_({width:true,height:true,top:true,left:true}));if(j){i+=' style="'+j+'"'}return i},_onChanging:b,_areaText:function(){return zUtl.encodeXML(this.coerceToString_(this._value))},setConstraint:function(h){if(typeof h=="string"&&h.charAt(0)!="["){this._cst=new zul.inp.SimpleConstraint(h)}else{this._cst=h}if(this._cst){delete this._lastRawValVld}},getConstraint:function(){return this._cst},doMouseOut_:function(){this._inplaceout=true;this.$supers("doMouseOut_",arguments)},doMouseOver_:function(){this._inplaceout=false;this.$supers("doMouseOver_",arguments)},doFocus_:function(h){this.$supers("doFocus_",arguments);var j=this.getInputNode();if(j){this._lastChg=j.value}if(h.domTarget.tagName){jq(this.$n()).addClass(this.getZclass()+"-focus");if(this._inplace){jq(this.getInputNode()).removeClass(this.getInplaceCSS());if(this._inplaceout===undefined){this._inplaceout=true}}if(this._errbox){var i=this;setTimeout(function(){if(i._errbox){i._errbox.open(i,null,"end_before",{overflow:true})}})}}},doBlur_:function(h){c(this,true);jq(this.$n()).removeClass(this.getZclass()+"-focus");if(!zk.alerting&&this.shallUpdate_(zk.currentFocus)){this.updateChange_();this.$supers("doBlur_",arguments)}if(this._inplace&&this._inplaceout){jq(this.getInputNode()).addClass(this.getInplaceCSS())}},_doSelect:function(i){if(this.isListen("onSelection")){var k=this.getInputNode(),j=zk(k).getSelectionRange(),h=j[0],l=j[1];this.fire("onSelection",{start:h,end:l,selected:k.value.substring(h,l)})}},shallUpdate_:function(h){return !h||!zUtl.isAncestor(this,h)},getErrorMesssage:function(){return this._errmsg},setErrorMessage:function(h){this.clearErrorMessage(true,true);this._markError(h,null,true)},clearErrorMessage:function(k,j){var h=this._errbox;if(h){this._errbox=null;h.destroy()}if(!j){var i=this.getZclass();this._errmsg=null;jq(this.getInputNode()).removeClass(i+"-text-invalid");if(zk.ie6_&&this.inRoundedMold()){jq(this.$n("btn")).removeClass(i+"-btn-right-edge-invalid")}}if(k){delete this._lastRawValVld}},coerceFromString_:function(h){return h},coerceToString_:function(h){return h||""},_markError:function(m,l,j){this._errmsg=m;var k=this.getZclass();if(this.desktop){jq(this.getInputNode()).addClass(k+"-text-invalid");if(zk.ie6_&&this.inRoundedMold()&&!this._buttonVisible){jq(this.$n("btn")).addClass(k+"-btn-right-edge-invalid")}var h=this._cst,i;if(h!="[c"){if(h&&(i=h.showCustomError)){i=i.call(h,this,m)}if(!i){this._errbox=this.showError_(m)}}if(!j){this.fire("onError",{value:l,message:m})}}},validate_:function(j){var h;if(h=this._cst){if(typeof h=="string"){return false}var i=h.validate(this,j);if(!i&&h.serverValidate){return false}return i}},_validate:function(h){zul.inp.validating=true;try{var j=h,i;if(typeof j=="string"||j==null){j=this.coerceFromString_(j);if(j&&(i=j.error)){this.clearErrorMessage(true);if(this._cst=="[c"){return{error:i,server:true}}this._markError(i,j);return j}}if(!this.desktop){this._errmsg=null}else{this.clearErrorMessage(true);i=this.validate_(j);if(i===false){this._lastRawValVld=h;return{value:j,server:true}}if(i){this._markError(i,j);return{error:i}}else{this._lastRawValVld=h}}return{value:j}}finally{zul.inp.validating=false}},_shallIgnore:function(h,j){var i=(zk.ie||zk.opera)?h.keyCode:h.charCode;if(!h.altKey&&!h.ctrlKey&&e(i)&&j.indexOf(String.fromCharCode(i))<0){h.stop();return true}},showError_:function(i){var h=new zul.inp.Errorbox();h.show(this,i);return h},_equalValue:function(i,h){return i==h||this.marshall_(i)==this.marshall_(h)},marshall_:function(h){return h},unmarshall_:function(h){return h},updateChange_:function(){if(zul.inp.validating){return false}var i=this.getInputNode(),k=i.value;if(k==this._lastRawValVld){return false}var h=this._errmsg,l=this._validate(k);if(!l.error||l.server){var j;if(!l.error){this._lastRawValVld=i.value=k=this.coerceToString_(l.value);j=h||!this._equalValue(l.value,this._value);if(j){this._value=l.value;this._defValue=k}}if(j||l.server){this.fire("onChange",f(this,this.marshall_(l.value)),l.server?{toServer:true}:null,90)}}return true},fireOnChange:function(h){this.fire("onChange",f(this,this.marshall_(this.getValue())),h)},_resetForm:function(){var h=this.getInputNode();if(h.value!=h.defaultValue){var i=this;setTimeout(function(){i.updateChange_()},0)}},focus_:function(h){zk(this.getInputNode()).focus(h);return true},domClass_:function(j){var i=this.$supers("domClass_",arguments),h=this.getZclass();if((!j||!j.zclass)&&this._disabled){i+=" "+h+"-disd"}if((!j||!j.input)&&this._inplace){i+=" "+this.getInplaceCSS()}if((!j||!j.zclass)&&this._readonly){i+=" "+h+"-real-readonly"}return i},bind_:function(){this.$supers(d,"bind_",arguments);var i=this.getInputNode(),h=this.getZclass();this._defValue=i.value;if(this._readonly){jq(i).addClass(h+"-readonly")}if(this._disabled){jq(i).addClass(h+"-text-disd")}this.domListen_(i,"onFocus","doFocus_").domListen_(i,"onBlur","doBlur_").domListen_(i,"onSelect");if(i=i.form){jq(i).bind("reset",this.proxy(this._resetForm))}},unbind_:function(){this.clearErrorMessage(true);var h=this.getInputNode();this.domUnlisten_(h,"onFocus","doFocus_").domUnlisten_(h,"onBlur","doBlur_").domUnlisten_(h,"onSelect");if(h=h.form){jq(h).unbind("reset",this.proxy(this._resetForm))}this.$supers(d,"unbind_",arguments)},doKeyDown_:function(h){var l=h.keyCode;if(this._readonly&&l==8&&h.target==this){h.stop();return}if(!this._inplaceout){this._inplaceout=l==9}if(l==9&&!h.altKey&&!h.ctrlKey&&!h.shiftKey&&this._tabbable){var j=this.getInputNode(),k=zk(j),i=k.getSelectionRange(),m=j.value;m=m.substring(0,i[0])+"\t"+m.substring(i[1]);j.value=m;m=i[0]+1;k.setSelectionRange(m,m);h.stop();return}c(this);this.$supers("doKeyDown_",arguments)},doKeyUp_:function(){if(this.isMultiline()){var h=this._maxlength;if(h>0){var i=this.getInputNode(),j=i.value;if(j!=this._defValue&&j.length>h){i.value=j.substring(0,h)}}}if(this.isListen("onChanging")){g(this)}this.$supers("doKeyUp_",arguments)},afterKeyDown_:function(h){if(this._inplace){if(!this._multiline&&h.keyCode==13){var j=jq(this.getInputNode()),i=this.getInplaceCSS();if(j.toggleClass(i).hasClass(i)){j.zk.setSelectionRange(0,j[0].value.length)}}else{jq(this.getInputNode()).removeClass(this.getInplaceCSS())}}if(h.keyCode!=13||!this.isMultiline()){this.$supers("afterKeyDown_",arguments)}},beforeCtrlKeys_:function(h){this.updateChange_()}},{onChangingDelay:350,onChangingForced:true});zk.load("zul.lang",function(){zul.inp.InputWidget._allowKeys="0123456789"+zk.MINUS+zk.PERCENT+(zk.groupingDenied?"":zk.GROUPING)})})();
zul.inp.Errorbox=zk.$extends(zul.wgt.Popup,{$init:function(){this.$supers("$init",arguments);this.setWidth("260px");this.setSclass("z-errbox")},show:function(a,c){this.parent=a;this.parent.__ebox=this;this.msg=c;jq(document.body).append(this);var b=this;setTimeout(function(){if(b.parent){b.open(a,null,"end_before",{overflow:true})}},0);zWatch.listen({onHide:[this.parent,this.onParentHide]})},destroy:function(){if(this.parent){zWatch.unlisten({onHide:[this.parent,this.onParentHide]});delete this.parent.__ebox}this.close();this.unbind();jq(this).remove();this.parent=null},onParentHide:function(){if(this.__ebox){this.__ebox.setFloating_(false);this.__ebox.close()}},bind_:function(){this.$supers(zul.inp.Errorbox,"bind_",arguments);var a=zul.inp.Errorbox;this._drag=new zk.Draggable(this,null,{starteffect:zk.$void,endeffect:a._enddrag,ignoredrag:a._ignoredrag,change:a._change});zWatch.listen({onScroll:this})},unbind_:function(){this._drag.destroy();zWatch.unlisten({onScroll:this});if(this.parent){zWatch.unlisten({onHide:[this.parent,this.onParentHide]})}this.$supers(zul.inp.Errorbox,"unbind_",arguments);this._drag=null},onScroll:function(a){if(a){this.position(this.parent,null,"end_before",{overflow:true});this._fixarrow()}},setDomVisible_:function(b,c){this.$supers("setDomVisible_",arguments);var a=this._stackup;if(a){a.style.display=c?"":"none"}},doMouseMove_:function(a){var d=a.domTarget;if(d==this.$n("c")){var e=a.pageY,c=jq(d),b=zk.parseInt(c.css("padding-right"));offs=c.zk.revisedOffset();c[e>=offs[1]&&e<offs[1]+b?"addClass":"removeClass"]("z-errbox-close-over")}else{this.$supers("doMouseMove_",arguments)}},doMouseOut_:function(a){var b=a.domTarget;if(b==this.$n("c")){jq(b).removeClass("z-errbox-close-over")}else{this.$supers("doMouseOut_",arguments)}},doClick_:function(a){var b=a.domTarget;if(b==this.$n("c")){if((b=this.parent)&&b.clearErrorMessage){b.clearErrorMessage(true,true)}else{zAu.wrongValue_(b,false)}}else{this.$supers("doClick_",arguments);this.parent.focus(0)}},open:function(){this.$supers("open",arguments);this.setTopmost();this._fixarrow()},prologHTML_:function(a){var b=this.uuid;a.push('<div id="',b);a.push('-a" class="z-errbox-left z-arrow" title="');a.push(zUtl.encodeXML(msgzk.GOTO_ERROR_FIELD));a.push('"><div id="',b,'-c" class="z-errbox-right z-errbox-close"><div class="z-errbox-center">');a.push(zUtl.encodeXML(this.msg,{multiline:true}));a.push("</div></div></div>")},onFloatUp:function(a){var d=a.origin;if(d==this){this.setTopmost();return}if(!d||d==this.parent||!this.isVisible()){return}var c=this,b=d;while((c=c.parent)&&!c.isFloating_()){if(c==d){return}}for(;b&&!b.isFloating_();b=b.parent){}if(c==b){var e=d.$n();if(e){this._uncover(e)}}},_uncover:function(a){var h=zk(a).cmOffset(),e=this.$n(),c=zk(e).cmOffset();if(jq.isOverlapped(h,[a.offsetWidth,a.offsetHeight],c,[e.offsetWidth,e.offsetHeight])){var j=this.parent.$n(),i;var g=zk(j).cmOffset(),d=j.offsetHeight,b=g[1]+d;i=h[1]+a.offsetHeight<=b?b:g[1]-e.offsetHeight;var f=zk(e).toStyleOffset(0,i);e.style.top=f[1]+"px";this._fixarrow()}},_fixarrow:function(){var e=this.parent.$n(),f=this.$n(),g=this.$n("a"),b=zk(e).revisedOffset(),h=zk(f).revisedOffset();var c=h[0]-b[0],a=h[1]-b[1],d;if(c>=e.offsetWidth-2){d=a<-10?"ld":a>=e.offsetHeight-2?"lu":"l"}else{if(c<0){d=a<-10?"rd":a>=e.offsetHeight-2?"ru":"r"}else{d=a<0?"d":"u"}}g.className="z-errbox-left z-arrow-"+d}},{_enddrag:function(b){var a=b.control;a.setTopmost();a._fixarrow()},_ignoredrag:function(b,d,a){var e=b.control.$n("c");return a.domTarget==e&&jq(e).hasClass("z-errbox-close-over")},_change:function(d){var c=d.control,a=c._stackup;if(a){var b=c.$n();a.style.top=b.style.top;a.style.left=b.style.left}c._fixarrow()}});
zkreg('zul.inp.Errorbox');zul.inp.SimpleConstraint=zk.$extends(zk.Object,{$init:function(e,d,f){if(typeof e=="string"){this._flags={};this._init(e)}else{this._flags=typeof e=="number"?this._cvtNum(e):e||{};this._regex=typeof d=="string"?new RegExp(d):d;this._errmsg=f;if(this._flags.SERVER){this.serverValidate=true}}},_init:function(d){l_out:for(var c=0,b=0,a=d.length;b>=0;c=b+1){for(;;++c){if(c>=a){return}var f=d.charAt(c);if(f=="/"){for(b=++c;;++b){if(b>=a){b=-1;break}f=d.charAt(b);if(f=="/"){break}if(f=="\\"){++b}}this._regex=new RegExp(b>=0?d.substring(c,b):d.substring(c));continue l_out}if(f==":"){this._errmsg=d.substring(c+1).trim();return}if(!zUtl.isChar(f,{whitespace:1})){break}}var e;for(b=c;;++b){if(b>=a){e=d.substring(c);b=-1;break}var f=d.charAt(b);if(f==","||f==":"||f==";"||f=="/"){if(this._regex&&c==b){c++;continue}e=d.substring(c,b);if(f==":"||f=="/"){--b}break}}this.parseConstraint_(e.trim().toLowerCase())}},getFlags:function(){return tis._flags},parseConstraint_:function(a){var b=this._flags;if(a=="no positive"){b.NO_POSITIVE=true}else{if(a=="no negative"){b.NO_NEGATIVE=true}else{if(a=="no zero"){b.NO_ZERO=true}else{if(a=="no empty"){b.NO_EMPTY=true}else{if(a=="no future"){b.NO_FUTURE=true}else{if(a=="no past"){b.NO_PAST=true}else{if(a=="no today"){b.NO_TODAY=true}else{if(a=="strict"){b.STRICT=true}else{if(a=="server"){b.SERVER=true;this.serverValidate=true}else{if(zk.debugJS){zk.error("Unknown constraint: "+a)}}}}}}}}}}},_cvtNum:function(a){var b={};if(a&1){b.NO_POSITIVE=b.NO_FUTURE=true}if(a&2){b.NO_NEGATIVE=b.NO_PAST=true}if(a&4){b.NO_ZERO=b.NO_TODAY=true}if(a&256){b.NO_EMPTY=true}if(a&512){b.STRICT=true}return b},validate:function(i,h){var e=this._flags,g=this._errmsg;switch(typeof h){case"string":if(e.NO_EMPTY&&(!h||!h.trim())){return g||msgzul.EMPTY_NOT_ALLOWED}var d=this._regex;if(d&&!d.test(h)){return g||msgzul.ILLEGAL_VALUE}if(e.STRICT&&h&&i.validateStrict){g=i.validateStrict(h);if(g){return g}}return;case"number":if(h>0){if(e.NO_POSITIVE){return g||this._msgNumDenied()}}else{if(h==0){if(e.NO_ZERO){return g||this._msgNumDenied()}}else{if(e.NO_NEGATIVE){return g||this._msgNumDenied()}}}return}if(h&&h.getFullYear){var c=zUtl.today(),h=new Date(h.getFullYear(),h.getMonth(),h.getDate());if((c-h)/86400000<0){if(e.NO_FUTURE){return g||this._msgDateDenied()}}else{if(h-c==0){if(e.NO_TODAY){return g||this._msgDateDenied()}}else{if(e.NO_PAST){return g||this._msgDateDenied()}}}return}if(h&&h.compareTo){var a=h.compareTo(0);if(a>0){if(e.NO_POSITIVE){return g||this._msgNumDenied()}}else{if(a==0){if(e.NO_ZERO){return g||this._msgNumDenied()}}else{if(e.NO_NEGATIVE){return g||this._msgNumDenied()}}}return}if(!h&&e.NO_EMPTY){return g||msgzul.EMPTY_NOT_ALLOWED}},_msgNumDenied:function(){var a=this._flags,b=this._errmsg;if(a.NO_POSITIVE){return b||(a.NO_ZERO?a.NO_NEGATIVE?msgzul.NO_POSITIVE_NEGATIVE_ZERO:msgzul.NO_POSITIVE_ZERO:a.NO_NEGATIVE?msgzul.NO_POSITIVE_NEGATIVE:msgzul.NO_POSITIVE)}else{if(a.NO_NEGATIVE){return b||(a.NO_ZERO?msgzul.NO_NEGATIVE_ZERO:msgzul.NO_NEGATIVE)}else{if(a.NO_ZERO){return b||msgzul.NO_ZERO}}}return b||msgzul.ILLEGAL_VALUE},_msgDateDenied:function(){var a=this._flags,b=this._errmsg;if(a.NO_FUTURE){return b||(a.NO_TODAY?a.NO_PAST?NO_FUTURE_PAST_TODAY:msgzul.NO_FUTURE_TODAY:a.NO_PAST?msgzul.NO_FUTURE_PAST:msgzul.NO_FUTURE)}else{if(a.NO_PAST){return b||(a.NO_TODAY?msgzul.NO_PAST_TODAY:msgzul.NO_PAST)}else{if(a.NO_TODAY){return b||msgzul.NO_TODAY}}}return b||msgzul.ILLEGAL_VALUE}});
zul.inp.SimpleSpinnerConstraint=zk.$extends(zul.inp.SimpleConstraint,{$define:{min:_zkf=function(){},max:_zkf},parseConstraint_:function(c){var e=c.replace(/ +/g," ").split(/[, ]/),b=e.length,a;for(var d=0;d<b+1;d++){if(e[d]=="min"){this._min=e[++d]*1;a=true}else{if(e[d]=="max"){this._max=e[++d]*1;a=true}}}if(a){return}else{return this.$supers("parseConstraint_",arguments)}},validate:function(c,b){switch(typeof b){case"number":if((this._max&&b>this._max)||(this._min&&b<this._min)){var a=msgzul.OUT_OF_RANGE+": ";a+="("+this._min!=null?this._max!=null?this._min+" ~ "+this._max:">= "+this._min:"<= "+this._max+")"}}if(a){return a}else{return this.$supers("validate",arguments)}}});
zul.inp.SimpleDoubleSpinnerConstraint=zk.$extends(zul.inp.SimpleConstraint,{$define:{min:_zkf=function(){},max:_zkf},parseConstraint_:function(c){var e=c.replace(/ +/g," ").split(/[, ]/),b=e.length,a;for(var d=0;d<b+1;d++){if(e[d]=="min"){this._min=e[++d]*1;a=true}else{if(e[d]=="max"){this._max=e[++d]*1;a=true}}}if(a){return}else{return this.$supers("parseConstraint_",arguments)}},validate:function(c,b){switch(typeof b){case"number":if((this._max&&b>this._max)||(this._min&&b<this._min)){var a=msgzul.OUT_OF_RANGE+": ";a+="("+this._min!=null?this._max!=null?this._min+" ~ "+this._max:">= "+this._min:"<= "+this._max+")"}}if(a){return a}else{return this.$supers("validate",arguments)}}});
zul.inp.SimpleDateConstraint=zk.$extends(zul.inp.SimpleConstraint,{format:"yyyyMMdd",parseConstraint_:function(b){if(b.startsWith("between")){var a=b.indexOf("and",7);if(a<0&&zk.debugJS){zk.error("Unknown constraint: "+b)}this._beg=new zk.fmt.Calendar().parseDate(b.substring(7,a),this.format);this._end=new zk.fmt.Calendar().parseDate(b.substring(a+3),this.format);if(this._beg.getTime()>this._end.getTime()){var c=this._beg;this._beg=this._end;this._end=c}this._beg.setHours(0);this._beg.setMinutes(0);this._beg.setSeconds(0);this._beg.setMilliseconds(0);this._end.setHours(0);this._end.setMinutes(0);this._end.setSeconds(0);this._end.setMilliseconds(0);return}else{if(b.startsWith("before")){this._end=new zk.fmt.Calendar().parseDate(b.substring(6),this.format);this._end.setHours(0);this._end.setMinutes(0);this._end.setSeconds(0);this._end.setMilliseconds(0);return}else{if(b.startsWith("after")){this._beg=new zk.fmt.Calendar().parseDate(b.substring(5),this.format);this._beg.setHours(0);this._beg.setMinutes(0);this._beg.setSeconds(0);this._beg.setMilliseconds(0);return}}}return this.$supers("parseConstraint_",arguments)},validate:function(c,b){if(jq.type(b)=="date"){var a=new Date(b.getFullYear(),b.getMonth(),b.getDate());if(this._beg!=null&&this._beg.getTime()>a.getTime()){return this.outOfRangeValue()}if(this._end!=null&&this._end.getTime()<a.getTime()){return this.outOfRangeValue()}}return this.$supers("validate",arguments)},outOfRangeValue:function(){return msgzul.OUT_OF_RANGE+": "+(this._beg!=null?this._end!=null?new zk.fmt.Calendar().formatDate(this._beg,this.format)+" ~ "+new zk.fmt.Calendar().formatDate(this._end,this.format):">= "+new zk.fmt.Calendar().formatDate(this._beg,this.format):"<= "+new zk.fmt.Calendar().formatDate(this._end,this.format))}});
zul.inp.Textbox=zk.$extends(zul.inp.InputWidget,{_value:"",_rows:1,$define:{multiline:function(){this.rerender()},tabbable:null,rows:function(a){var b=this.getInputNode();if(b&&this.isMultiline()){b.rows=a}},type:zk.ie?function(){this.rerender()}:function(a){var b=this.getInputNode();if(b){b.type=a}}},textAttrs_:function(){var a=this.$supers("textAttrs_",arguments);if(this._multiline){a+=' rows="'+this._rows+'"'}return a},getZclass:function(){var a=this._zclass;return a!=null?a:"z-textbox"}});
zkreg('zul.inp.Textbox');zk._m={};
zk._m['default']=function(a){if(this.isMultiline()){a.push("<textarea",this.domAttrs_(),">",this._areaText(),"</textarea>")}else{a.push("<input",this.domAttrs_(),"/>")}};
;zkmld(zk._p.p.Textbox,zk._m);zul.inp.FormatWidget=zk.$extends(zul.inp.InputWidget,{$define:{format:function(){var a=this.getInputNode();if(a){a.value=this.coerceToString_(this._value)}}}});
zul.inp.Intbox=zk.$extends(zul.inp.FormatWidget,{intValue:function(){return this.$supers("getValue",arguments)},coerceFromString_:function(a){if(!a){return null}var b=zk.fmt.Number.unformat(this._format,a),c=parseInt(b.raw,10);if(isNaN(c)||(b.raw!=""+c&&b.raw!="-"+c)){return{error:zk.fmt.Text.format(msgzul.INTEGER_REQUIRED,a)}}if(c>2147483647||c<-2147483648){return{error:zk.fmt.Text.format(msgzul.OUT_OF_RANGE+"(−2147483648 - 2147483647)")}}if(b.divscale){c=Math.round(c/Math.pow(10,b.divscale))}return c},coerceToString_:function(b){var a=this._format;return a?zk.fmt.Number.format(a,b,this._rounding):b!=null?""+b:""},getZclass:function(){var a=this._zclass;return a!=null?a:"z-intbox"},doKeyPress_:function(a){if(!this._shallIgnore(a,zul.inp.InputWidget._allowKeys)){this.$supers("doKeyPress_",arguments)}}});
zkreg('zul.inp.Intbox');zk._m={};
zk._m['default']=function(a){a.push("<input",this.domAttrs_(),"/>")};
;zkmld(zk._p.p.Intbox,zk._m);zul.inp.Longbox=zk.$extends(zul.inp.FormatWidget,{coerceFromString_:function(b){if(!b){return null}var c=zk.fmt.Number.unformat(this._format,b),d=new zk.Long(c.raw),a=d.$toString();if(c.raw!=a&&c.raw!="-"+a){return{error:zk.fmt.Text.format(msgzul.INTEGER_REQUIRED,b)}}if(c.divscale){d.setPrecision(d.getPrecision()+c.divscale)}if(this._isOutRange(d.$toString())){return{error:zk.fmt.Text.format(msgzul.OUT_OF_RANGE+"(−9223372036854775808 - 9223372036854775807)")}}return d},coerceToString_:function(b){var a=this._format;return b!=null?typeof b=="string"?b:a?zk.fmt.Number.format(a,b.$toString(),this._rounding):b.$toLocaleString():""},getZclass:function(){var a=this._zclass;return a!=null?a:"z-longbox"},doKeyPress_:function(a){if(!this._shallIgnore(a,zul.inp.InputWidget._allowKeys)){this.$supers("doKeyPress_",arguments)}},_isOutRange:function(d){var c=d.charAt(0)=="-";if(c){d=d.substring(1)}if(d.length>19){return true}if(d.length<19){return false}var b=c?"9223372036854775808":"9223372036854775807";for(var a=0;a<19;++a){if(d.charAt(a)>b.charAt(a)){return true}if(d.charAt(a)<b.charAt(a)){return false}}return false},marshall_:function(a){return a?a.$toString():a},unmarshall_:function(a){return a?new zk.Long(a):a}});
zkreg('zul.inp.Longbox');zk._m={};
zk._m['default']=[zk._p.p.Intbox,'default'];zkmld(zk._p.p.Longbox,zk._m);(function(){var a;zk.load("zul.lang",function(){a=zul.inp.InputWidget._allowKeys+zk.DECIMAL+"e"});zul.inp.Doublebox=zk.$extends(zul.inp.FormatWidget,{coerceFromString_:function(j){if(!j){return null}var d=zk.fmt.Number.unformat(this._format,j),k=d.raw,c=parseFloat(k),e=""+c,i=e.indexOf("."),g=k.indexOf(".");if(isNaN(c)||e.indexOf("e")<0){if(g==0){k="0"+k;++g}if(g>=0&&k.substring(k.substring(g+1))&&i<0){i=e.length;e+="."}var f=k.length,b=e.length;if(i>=0&&i<g){b-=i;f-=g;for(var h=g-i;h-->0;){e="0"+e}}if(b<f){for(var h=f-b;h-->0;){e+="0"}}if(isNaN(c)||(k!=e&&k!="-"+e&&k.indexOf("e")<0)){return{error:zk.fmt.Text.format(msgzul.NUMBER_REQUIRED,j)}}}if(d.divscale){c=c/Math.pow(10,d.divscale)}return c},_allzero:function(c){for(var b=c.length;b-->0;){if(c.charAt(b)!="0"){return false}}return true},coerceToString_:function(c){var b=this._format;return c==null?"":b?zk.fmt.Number.format(b,c,this._rounding):zk.DECIMAL=="."?(""+c):(""+c).replace(".",zk.DECIMAL)},getZclass:function(){var b=this._zclass;return b!=null?b:"z-doublebox"},doKeyPress_:function(b){if(!this._shallIgnore(b,a)){this.$supers("doKeyPress_",arguments)}}})})();
zkreg('zul.inp.Doublebox');zk._m={};
zk._m['default']=[zk._p.p.Intbox,'default'];zkmld(zk._p.p.Doublebox,zk._m);(function(){var a;zk.load("zul.lang",function(){a=zul.inp.InputWidget._allowKeys+zk.DECIMAL});zul.inp.Decimalbox=zk.$extends(zul.inp.FormatWidget,{$define:{rounding:null,scale:null},coerceFromString_:function(c){if(!c){return null}var d=zk.fmt.Number.unformat(this._format,c),e=new zk.BigDecimal(d.raw),b=e.$toString();if(d.raw!=b&&d.raw!="-"+b){return{error:zk.fmt.Text.format(msgzul.NUMBER_REQUIRED,c)}}if(d.divscale){e.setPrecision(e.getPrecision()+d.divscale)}if(this._scale>0){e=zk.fmt.Number.setScale(e,this._scale,this._rounding)}return e},coerceToString_:function(c){var b=this._format;return c!=null?typeof c=="string"?c:b?zk.fmt.Number.format(b,c.$toString(),this._rounding):c.$toLocaleString():""},getZclass:function(){var b=this._zclass;return b!=null?b:"z-decimalbox"},doKeyPress_:function(b){if(!this._shallIgnore(b,a)){this.$supers("doKeyPress_",arguments)}},marshall_:function(b){return b?b.$toString():b},unmarshall_:function(b){return b?new zk.BigDecimal(b):b}})})();
zkreg('zul.inp.Decimalbox');zk._m={};
zk._m['default']=[zk._p.p.Intbox,'default'];zkmld(zk._p.p.Decimalbox,zk._m);zul.inp.ComboWidget=zk.$extends(zul.inp.InputWidget,{_buttonVisible:true,$define:{buttonVisible:function(a){var d=this.$n("btn"),b=this.getZclass();if(d){if(!this.inRoundedMold()){jq(d)[a?"show":"hide"]();jq(this.getInputNode())[a?"removeClass":"addClass"](b+"-right-edge")}else{var c=a?"removeClass":"addClass";jq(d)[c](b+"-btn-right-edge");if(zk.ie6_){jq(d)[c](b+(this._readonly?"-btn-right-edge-readonly":"-btn-right-edge"));if(jq(this.getInputNode()).hasClass(b+"-text-invalid")){jq(d)[c](b+"-btn-right-edge-invalid")}}}this.onSize()}},autodrop:null},setWidth:function(){this.$supers("setWidth",arguments);if(this.desktop){this.onSize()}},onSize:_zkf=function(){var a=this.getWidth();if(!a||a.indexOf("%")!=-1){this.getInputNode().style.width=""}this.syncWidth()},onShow:_zkf,onFloatUp:function(b){if(jq(this.getPopupNode_()).is(":animated")||(!this._inplace&&!this.isOpen())){return}var c=b.origin;if(!zUtl.isAncestor(this,c)){if(this.isOpen()){this.close({sendOnOpen:true})}if(this._inplace){var d=this.$n(),a=this.getInplaceCSS();if(jq(d).hasClass(a)){return}d.style.width=jq.px0(zk(d).revisedWidth(d.offsetWidth));jq(this.getInputNode()).addClass(a);jq(d).addClass(a);this.onSize();d.style.width=this.getWidth()||""}}},onResponse:function(d,e){if((e.rtags.onOpen||e.rtags.onChanging)&&this.isOpen()){if(zk.animating()){var c=this;setTimeout(function(){c.onResponse(d,e)},50);return}var a=this.getPopupNode_(),b=this.getPopupSize_(a);a.style.height=b[1];if(!zk.ie6_){a.style.width=b[0]}this._fixsz(b)}},setOpen:function(a,b){if(a){this.open(b)}else{this.close(b)}},isOpen:function(){return this._open},open:function(a){if(this._open){return}this._open=true;if(a&&a.focus){this.focus()}var b=this.getPopupNode_(),f=this.getInputNode();if(!b){return}this.setFloating_(true,{node:b});zWatch.fire("onFloatUp",this);var i=this.setTopmost();var g=this.getPopupSize_(b);b.style.width=g[0];b.style.height="auto";b.style.zIndex=i>0?i:1;var c=this.getPopupNode_(true);if(c){c.style.width=c.style.height="auto"}b.style.position="absolute";b.style.display="block";b.style.visibility="hidden";b.style.left="-10000px";var l=zk(b);l.makeVParent();b.style.left="";this._fixsz(g);l.position(f,"after_start");b.style.display="none";b.style.visibility="";this.slideDown_(b);if(zk.gecko){var k=c?c.rows:null;if(k){var h=b.offsetHeight-b.clientHeight;if(h>10&&b.offsetHeight<150){var d=0;for(var e=k.length;e--;){d+=k[e].offsetHeight}b.style.height=(d+20)+"px"}}}if(!this._shadow){this._shadow=new zk.eff.Shadow(b,{left:-4,right:4,top:-2,bottom:3})}if(a&&a.sendOnOpen){this.fire("onOpen",{open:true,value:f.value},{rtags:{onOpen:1}})}},slideDown_:function(a){zk(a).slideDown(this,{afterAnima:this._afterSlideDown})},slideUp_:function(a){a.style.display="none"},zsync:function(){this.$supers("zsync",arguments);if(!zk.css3&&this.isOpen()&&this._shadow){this._shadow.sync()}},_afterSlideDown:function(a){if(!this.desktop){zk(a).undoVParent();jq(a).remove()}if(this._shadow){this._shadow.sync()}},getPopupNode_:function(a){return a?this.$n("cave"):this.$n("pp")},close:function(c){if(!this._open){return}if(zk.animating()){var b=this;setTimeout(function(){b.close(c)},50);return}this._open=false;if(c&&c.focus){this.focus()}else{jq(this.$n()).removeClass(this.getZclass()+"-focus")}var a=this.getPopupNode_();if(!a){return}this.setFloating_(false);zWatch.fireDown("onHide",this);this.slideUp_(a);zk(a).undoVParent();if(this._shadow){this._shadow.destroy();this._shadow=null}var d=this.$n("btn");if(d){jq(d).removeClass(this.getZclass()+"-btn-over")}if(c&&c.sendOnOpen){this.fire("onOpen",{open:false,value:this.getInputNode().value},{rtags:{onOpen:1}})}},_fixsz:function(d){var c=this.getPopupNode_();if(!c){return}var b=this.getPopupNode_(true);if(d[1]=="auto"&&c.offsetHeight>350){c.style.height="350px"}else{if(c.offsetHeight<10){c.style.height="10px"}}if(d[0]=="auto"){var a=this.$n();if(c.offsetWidth<a.offsetWidth){c.style.width=a.offsetWidth+"px";if(b){b.style.width="100%"}}else{var e=jq.innerWidth()-20;if(e<a.offsetWidth){e=a.offsetWidth}if(c.offsetWidth>e){c.style.width=e}}}},dnPressed_:zk.$void,upPressed_:zk.$void,otherPressed_:zk.$void,enterPressed_:function(a){this.close({sendOnOpen:true});this.updateChange_();a.stop()},escPressed_:function(a){this.close({sendOnOpen:true});a.stop()},getPopupSize_:function(a){return["auto","auto"]},redraw_:function(a){var c=this.uuid,d=this.getZclass(),b=this._buttonVisible;a.push("<i",this.domAttrs_({text:true}),'><input id="',c,'-real" class="',d,"-inp");if(!b){a.push(" ",d,"-right-edge")}a.push('" autocomplete="off"',this.textAttrs_(),'/><i id="',c,'-btn" class="',d,"-btn");if(this.inRoundedMold()){if(!b){a.push(" ",d,"-btn-right-edge")}if(this._readonly){a.push(" ",d,"-btn-readonly")}if(zk.ie6_&&!b&&this._readonly){a.push(" ",d,"-btn-right-edge-readonly")}}else{if(!b){a.push('" style="display:none')}}a.push('"></i>');this.redrawpp_(a);a.push("</i>")},redrawpp_:function(a){},syncWidth:function(){var e=this.$n();if(!zk(e).isRealVisible()||(!this._inplace&&!e.style.width)){return}var g=this.getInputNode(),h=jq(e),f=jq(g),d=this.getInplaceCSS(),i=!e.style.width&&this._inplace;if(this._buttonVisible&&i){h.removeClass(d);f.removeClass(d);if(zk.opera){e.style.width=jq.px0(zk(e).revisedWidth(e.clientWidth)+zk(e).borderWidth())}else{e.style.width=jq.px0(zk(e).revisedWidth(e.offsetWidth))}h.addClass(d);f.addClass(d)}if(zk.ie6_&&e.style.width){g.style.width=jq.px(0)}var a=this.inRoundedMold()&&i;if(a){h.removeClass(d);f.removeClass(d)}var b=zk.opera?zk(e).revisedWidth(e.clientWidth)+zk(e).borderWidth():zk(e).revisedWidth(e.offsetWidth),c=this.$n("btn");if(a){h.addClass(d);f.addClass(d)}g.style.width=jq.px0(zk(g).revisedWidth(b-(c?c.offsetWidth:0)))},beforeParentMinFlex_:function(a){if("w"==a){this.syncWidth()}},doFocus_:function(a){var b=this.$n();if(this._inplace){b.style.width=jq.px0(zk(b).revisedWidth(b.offsetWidth))}this.$supers("doFocus_",arguments);if(this._inplace){if(jq(b).hasClass(this.getInplaceCSS())){jq(b).removeClass(this.getInplaceCSS());this.onSize()}}},doBlur_:function(a){var b=this.$n();if(this._inplace&&this._inplaceout){b.style.width=jq.px0(zk(b).revisedWidth(b.offsetWidth))}this.$supers("doBlur_",arguments);if(this._inplace&&this._inplaceout){jq(b).addClass(this.getInplaceCSS());this.onSize();b.style.width=this.getWidth()||""}},afterKeyDown_:function(a){if(this._inplace){jq(this.$n()).toggleClass(this.getInplaceCSS(),a.keyCode==13?null:false)}this.$supers("afterKeyDown_",arguments)},bind_:function(){this.$supers(zul.inp.ComboWidget,"bind_",arguments);var a=this.$n("btn"),b=this.getInputNode();if(this._inplace){jq(b).addClass(this.getInplaceCSS())}if(a){this._auxb=new zul.Auxbutton(this,a,b);this.domListen_(a,"onClick","_doBtnClick")}zWatch.listen({onSize:this,onShow:this,onFloatUp:this,onResponse:this});if(!zk.css3){jq.onzsync(this)}},unbind_:function(){this.close();var a=this.$n("btn");if(a){this._auxb.cleanup();this._auxb=null;this.domUnlisten_(a,"onClick","_doBtnClick")}zWatch.unlisten({onSize:this,onShow:this,onFloatUp:this,onResponse:this});if(!zk.css3){jq.unzsync(this)}this.$supers(zul.inp.ComboWidget,"unbind_",arguments)},_doBtnClick:function(a){if(this.inRoundedMold()&&!this._buttonVisible){return}if(!this._disabled&&!zk.animating()){if(this._open){this.close({focus:true,sendOnOpen:true})}else{this.open({focus:true,sendOnOpen:true})}}a.stop()},doKeyDown_:function(a){this._doKeyDown(a);if(!a.stopped){this.$supers("doKeyDown_",arguments)}},doClick_:function(a){if(!this._disabled){if(a.domTarget==this.getPopupNode_()){this.close({focus:true,sendOnOpen:true})}else{if(this._readonly&&!this.isOpen()&&this._buttonVisible){this.open({focus:true,sendOnOpen:true})}}this.$supers("doClick_",arguments)}},_doKeyDown:function(a){var d=a.keyCode,b=this._open;if(d==9||(zk.safari&&d==0)){if(b){this.close({sendOnOpen:true})}return}if(a.altKey&&(d==38||d==40)){if(b){this.close({sendOnOpen:true})}else{this.open({sendOnOpen:true})}var c={propagation:true};if(zk.ie){c.dom=true}a.stop(c);return}if(b&&(d==13||d==27)){if(d==13){this.enterPressed_(a)}else{this.escPressed_(a)}return}if(d==18||d==27||d==13||(d>=112&&d<=123)){return}if(this._autodrop&&!b){this.open({sendOnOpen:true})}if(d==38){this.upPressed_(a)}else{if(d==40){this.dnPressed_(a)}else{this.otherPressed_(a)}}},onChildAdded_:_zkf=function(a){if(this._shadow){this._shadow.sync()}},onChildRemoved_:_zkf,onChildVisible_:_zkf});
zul.inp.Combobox=zk.$extends(zul.inp.ComboWidget,{_autocomplete:true,$define:{autocomplete:null,repos:function(){if(this.desktop){var b=this.getInputNode(),a;b.value=this.valueEnter_!=null?this.valueEnter_:this._value||"";if(zk.ie&&b.value){a=b.value.length;a=[a,a]}this._typeahead(this._bDel,a);this._bDel=null}this._repos=false}},setValue:function(a){this.$supers("setValue",arguments);this._reIndex();this.valueEnter_=null},_reIndex:function(){var b=this.getValue();if(!this._sel||b!=this._sel.getLabel()){if(this._sel){var c=this._sel.$n();if(c){jq(c).removeClass(this._sel.getZclass()+"-seld")}}this._sel=this._lastsel=null;for(var a=this.firstChild;a;a=a.nextSibling){if(b==a.getLabel()){this._sel=a;break}}}},validateStrict:function(b){var a=this._cst;return this._findItem(b,true)?null:(a?a._errmsg:"")||msgzul.VALUE_NOT_MATCHED},_findItem:function(b,a){return this._findItem0(b,a)},_findItem0:function(g,a,e,b){var f=this.firstChild;if(f&&g){g=g.toLowerCase();var d=this._sel;if(!d||d.parent!=this){d=f}for(var c=b?d.nextSibling?d.nextSibling:f:d;;){if((!a||!c.isDisabled())&&c.isVisible()&&(e?c.getLabel().toLowerCase().startsWith(g):g==c.getLabel().toLowerCase())){return c}if(!(c=c.nextSibling)){c=f}if(c==d){break}}}},_hilite:function(a){this._hilite2(this._findItem(this.getInputNode().value,this._isStrict()||(a&&a.strict)),a)},_hilite2:function(d,c){c=c||{};var a=this._sel;this._sel=d;if(a&&a.parent==this){var f=a.$n();if(f){jq(f).removeClass(a.getZclass()+"-seld")}}if(d&&!d.isDisabled()){jq(d.$n()).addClass(d.getZclass()+"-seld")}if(c.sendOnSelect&&this._lastsel!=d){this._lastsel=d;if(d){var b=this.getInputNode(),e=d.getLabel();this.valueEnter_=b.value=e;if(!c.noSelectRange){zk(b).setSelectionRange(0,e.length)}}if(c.sendOnChange){this.$supers("updateChange_",[])}this.fire("onSelect",{items:d?[d]:[],reference:d})}},_isStrict:function(){var a=this.getConstraint();return a&&a._flags&&a._flags.STRICT},open:function(a){this.$supers("open",arguments);this._hilite()},dnPressed_:function(a){this._updnSel(a)},upPressed_:function(a){this._updnSel(a,true)},_updnSel:function(j,g){var d=this.getInputNode(),b=d.value,a,i;if(b){b=b.toLowerCase();var e=this._sel,h=this._next(null,!g);if(!e||e.parent!=this){e=this._next(null,g)}if(!e){j.stop();return}for(var k=e;;){if(!k.isDisabled()&&k.isVisible()){var f=k.getLabel().toLowerCase();if(b==f){a=k;break}else{if(!i&&f.startsWith(b)){i=k;break}}}if((k=this._next(k,g))==e){break}}if(!a){a=i}if(a){var c=zk(d).getSelectionRange();if(c[0]==0&&c[1]==b.length){a=this._next(a,g)}}else{a=this._next(null,g)}}else{a=this._next(null,true)}if(a){zk(a).scrollIntoView(this.$n("pp"))}this._select(a,{sendOnSelect:true});j.stop()},_next:(function(){function a(e,d,c){var b=d?"previousSibling":"nextSibling";for(var f=c?e:e[b];f;f=f[b]){if(!f.isDisabled()){return f}}return null}return function(c,b){if(c){c=a(c,b)}return c?c:a(b?this.firstChild:this.lastChild,!b,true)}})(),_select:function(c,b){var a=this.getInputNode(),d=a.value=c?c.getLabel():"";this.valueSel_=d;this._hilite2(c,b);if(d){zk(a).setSelectionRange(0,d.length)}},otherPressed_:function(b){var f=this,e=b.keyCode,a;this._bDel=a=e==8||e==46;if(this._readonly){switch(e){case 35:case 36:this._hilite2();this.getInputNode().value="";case 37:case 39:this._updnSel(b,e==37||e==35);break;case 8:b.stop();break;default:var c=String.fromCharCode(e);var d=this._findItem0(c,true,true,!!this._sel);if(d){this._select(d,{sendOnSelect:true})}}}else{setTimeout(function(){f._typeahead(a)},zk.opera||zk.safari?10:0)}},_typeahead:function(a,e){if(zk.currentFocus!=this){return}var c=this.getInputNode(),g=c.value,e=e||zk(c).getSelectionRange(),f=this.firstChild;this.valueEnter_=g;if(!g||!f||e[0]!=g.length||e[0]!=e[1]){return this._hilite({strict:true})}var d=this._findItem(g,true);if(d||a||!this._autocomplete){return this._hilite2(d)}g=g.toLowerCase();d=this._sel;if(!d||d.parent!=this){d=f}for(var b=d;;){if(!b.isDisabled()&&b.isVisible()&&b.getLabel().toLowerCase().startsWith(g)){c.value=b.getLabel();zk(c).setSelectionRange(g.length,c.value.length);this._hilite2(b);return}if(!(b=b.nextSibling)){b=f}if(b==d){this._hilite2();return}}},updateChange_:function(){if(this.$supers("updateChange_",arguments)){this._hilite({sendOnSelect:true,noSelectRange:true});return true}this.valueEnter_=null},unbind_:function(){this._hilite2();this._sel=this._lastsel=null;this.$supers(zul.inp.Combobox,"unbind_",arguments)},getZclass:function(){var a=this._zclass;return a?a:"z-combobox"+(this.inRoundedMold()?"-rounded":"")},redrawpp_:function(b){var c=this.uuid;b.push('<div id="',c,'-pp" class="',this.getZclass(),'-pp" style="display:none" tabindex="-1"><table id="',c,'-cave"',zUtl.cellps0,">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</table></div>")}});
zkreg('zul.inp.Combobox');zk._m={};
zk._m['rounded']=zul.inp.Combobox.prototype.redraw_;
;zk._m['default']=[zk._p.p.Combobox,'rounded'];zkmld(zk._p.p.Combobox,zk._m);zul.inp.Comboitem=zk.$extends(zul.LabelImageWidget,{$define:{disabled:function(a){var c=this.$n();if(c){var b=this.getZclass()+"-disd";a?jq(c).addClass(b):jq(c).removeClass(b)}},description:_zkf=function(){this.rerender()},content:_zkf},domLabel_:function(){return zUtl.encodeXML(this.getLabel(),{pre:1})},doMouseOver_:function(){if(!this._disabled){var c=this.$n(),a=jq(c),b=this.getZclass();a.addClass(a.hasClass(b+"-seld")?b+"-over-seld":b+"-over")}this.$supers("doMouseOver_",arguments)},doMouseOut_:function(){if(!this._disabled){this._doMouseOut()}this.$supers("doMouseOut_",arguments)},_doMouseOut:function(){var b=this.$n(),a=this.getZclass();jq(b).removeClass(a+"-over").removeClass(a+"-over-seld")},doClick_:function(b){if(!this._disabled){this._doMouseOut();var a=this.parent;a._select(this,{sendOnSelect:true,sendOnChange:true});a.close({sendOnOpen:true});a._shallClose=true;zk(a.getInputNode()).focus();b.stop()}},domClass_:function(c){var a=this.$supers("domClass_",arguments);if(this._disabled&&(!c||!c.zclass)){var b=this.getZclass();a+=" "+b+"-disd"}return a},getZclass:function(){var a=this._zclass;return a!=null?a:"z-comboitem"},deferRedrawHTML_:function(a){a.push("<tr",this.domAttrs_({domClass:1}),' class="z-renderdefer"></tr>')}});
zkreg('zul.inp.Comboitem');zk._m={};
zk._m['default']=function(b){var c=this.getZclass();b.push("<tr",this.domAttrs_({text:true}),'><td class="',c,'-img">',this.domImage_(),'</td><td class="',c,'-text">',this.domLabel_());var a;if(a=this._description){b.push('<br/><span class="',c,'-inner">',zUtl.encodeXML(a),"</span>")}if(a=this._content){b.push('<span class="',c,'-cnt">',a,"</span>")}b.push("</td></tr>")};
;zkmld(zk._p.p.Comboitem,zk._m);zul.inp.Bandbox=zk.$extends(zul.inp.ComboWidget,{getPopupSize_:function(b){var d=this.firstChild,a,c;if(d){a=d._hflex=="min"&&d._hflexsz?jq.px0(d._hflexsz):d.getWidth();c=d._vflex=="min"&&d._vflexsz?jq.px0(d._vflexsz):d.getHeight()}return[a||"auto",c||"auto"]},getZclass:function(){var a=this._zclass;return a!=null?a:"z-bandbox"+(this.inRoundedMold()?"-rounded":"")},getCaveNode:function(){return this.$n("pp")||this.$n()},redrawpp_:function(b){b.push('<div id="',this.uuid,'-pp" class="',this.getZclass(),'-pp" style="display:none" tabindex="-1">');for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div>")}});
zkreg('zul.inp.Bandbox');zk._m={};
zk._m['rounded']=zul.inp.Bandbox.prototype.redraw_;
;zk._m['default']=[zk._p.p.Bandbox,'rounded'];zkmld(zk._p.p.Bandbox,zk._m);zul.inp.Bandpopup=zk.$extends(zul.Widget,{getZclass:function(){var a=this._zclass;return a!=null?a:"z-bandpopup"},afterChildrenMinFlex_:function(b){if(b=="w"){var c=this.parent,a=c&&c.$n("pp");if(a){a.style.width=jq.px0(this._hflexsz);zk(a)._updateProp(["width"])}}}});
zkreg('zul.inp.Bandpopup',true);zk._m={};
zk._m['default']=function(b){b.push("<div",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div>")};
;zkmld(zk._p.p.Bandpopup,zk._m);(function(){function a(h){var e=h.$n("btn");e.title=h._curpos;h.updateFormData(h._curpos);var g=h.isVertical(),f=zk(h.getRealNode()).cmOffset(),d=g?h._getHeight():h._getWidth(),c=d>0?Math.round((h._curpos*d)/h._maxpos):0;f=zk(e).toStyleOffset(f[0],f[1]);f=g?[0,(f[1]+c)]:[(f[0]+c),0];f=h._snap(f[0],f[1]);return f[(g?1:0)]}function b(g,f){var e=jq(g.$n("btn")),c=g.isVertical()?["top","height"]:["left","width"],d={};d[c[0]]=jq.px0(f?(f+zk.parseInt(e.css(c[0]))-e[c[1]]()/2):a(g));return d}zul.inp.Slider=zk.$extends(zul.Widget,{_orient:"horizontal",_curpos:0,_maxpos:100,_pageIncrement:10,_slidingtext:"{0}",_pageIncrement:-1,$define:{orient:function(){if(this.isVertical()){this.setWidth("");this.setHeight("207px")}else{this.setWidth("207px");this.setHeight("")}this.rerender()},curpos:function(){if(this.desktop){this._fixPos()}},maxpos:function(){if(this._curpos>this._maxpos){this._curpos=this._maxpos;if(this.desktop){this._fixPos()}}},slidingtext:null,pageIncrement:null,name:function(){if(this.efield){this.efield.name=this._name}}},getZclass:function(){if(this._zclass!=null){return this._zclass}var c="z-slider";if(this.inScaleMold()){return c+"-scale"}else{if(this.inSphereMold()){return c+("horizontal"==this._orient?"-sphere-hor":"-sphere-ver")}else{return c+("horizontal"==this._orient?"-hor":"-ver")}}},doMouseOver_:function(c){jq(this.$n("btn")).addClass(this.getZclass()+"-btn-over");this.$supers("doMouseOver_",arguments)},doMouseOut_:function(c){jq(this.$n("btn")).removeClass(this.getZclass()+"-btn-over");this.$supers("doMouseOut_",arguments)},onup_:function(c){var d=zul.inp.Slider.down_btn,e;if(d){e=zk.Widget.$(d);var f=e.getZclass();jq(d).removeClass(f+"-btn-drag").removeClass(f+"-btn-over")}zul.inp.Slider.down_btn=null;if(e){jq(document).unbind("mouseup",e.onup_)}},doMouseDown_:function(c){var d=this.$n("btn");jq(d).addClass(this.getZclass()+"-btn-drag");jq(document).mouseup(this.onup_);zul.inp.Slider.down_btn=d;this.$supers("doMouseDown_",arguments)},doClick_:function(d){var f=jq(this.$n("btn")),j=f.zk.revisedOffset(),i=this,e=this._pageIncrement,c=e<0,h=this.isVertical(),g=h?d.pageY-j[1]:d.pageX-j[0];if(!f[0]||f.is(":animated")){return}if(!c){this._curpos+=g>0?e:-e;g=null}f.animate(b(this,g),"slow",function(){j=c?i._realpos():i._curpos;if(j>i._maxpos){j=i._maxpos}i.fire("onScroll",j);if(c){i._fixPos()}});this.$supers("doClick_",arguments)},_makeDraggable:function(){this._drag=new zk.Draggable(this,this.$n("btn"),{constraint:this._orient||"horizontal",starteffect:this._startDrag,change:this._dragging,endeffect:this._endDrag})},_snap:function(d,g){var e=this.$n("btn"),f=zk(this.$n()).cmOffset();f=zk(e).toStyleOffset(f[0],f[1]);if(d<=f[0]){d=f[0]}else{var c=f[0]+this._getWidth();if(d>c){d=c}}if(g<=f[1]){g=f[1]}else{var c=f[1]+this._getHeight();if(g>c){g=c}}return[d,g]},_startDrag:function(d){var c=d.control;c.$n("btn").title="";c.slidepos=c._curpos;jq(document.body).append('<div id="zul_slidetip" class="z-slider-pp"style="position:absolute;display:none;z-index:60000;background-color:white;border: 1px outset">'+c.slidepos+"</div>");c.slidetip=jq("#zul_slidetip")[0];if(c.slidetip){c.slidetip.style.display="block";zk(c.slidetip).position(c.$n(),c.isVertical()?"end_before":"after_start")}},_dragging:function(d){var c=d.control,e=c._realpos();if(e!=c.slidepos){if(e>c._maxpos){e=c._maxpos}c.slidepos=e;if(c.slidetip){c.slidetip.innerHTML=c._slidingtext.replace(/\{0\}/g,e)}c.fire("onScrolling",e)}c._fixPos()},_endDrag:function(d){var c=d.control,e=c._realpos();c.fire("onScroll",e);c._fixPos();jq(c.slidetip).remove();c.slidetip=null},_realpos:function(h){var c=zk(this.$n("btn")).cmOffset(),g=zk(this.getRealNode()).cmOffset(),e=this._maxpos,i;if(this.isVertical()){var d=this._getHeight();i=d?Math.round(((c[1]-g[1])*e)/d):0}else{var f=this._getWidth();i=f?Math.round(((c[0]-g[0])*e)/f):0}return this._curpos=(i>=0?i:0)},_getWidth:function(){return this.getRealNode().clientWidth-this.$n("btn").offsetWidth+7},_getHeight:function(){return this.getRealNode().clientHeight-this.$n("btn").offsetHeight+7},_fixPos:_zkf=function(){this.$n("btn").style[this.isVertical()?"top":"left"]=jq.px0(a(this))},onSize:_zkf,onShow:_zkf,inScaleMold:function(){return this.getMold()=="scale"},inSphereMold:function(){return this.getMold()=="sphere"},isVertical:function(){return"vertical"==this._orient},updateFormData:function(c){if(this._name){c=c||0;if(!this.efield){this.efield=jq.newHidden(this._name,c,this.$n())}else{this.efield.value=c}}},getRealNode:function(){return this.inScaleMold()?this.$n("real"):this.$n()},bind_:function(){this.$supers(zul.inp.Slider,"bind_",arguments);var c=this.$n("inner");if(this.isVertical()){this.$n("btn").style.top="0px";var d=this.getRealNode().clientHeight;if(d>0){c.style.height=(d+7)+"px"}else{c.style.height="214px"}}this._makeDraggable();zWatch.listen({onSize:this,onShow:this});this.updateFormData(this._curpos);this._fixPos()},unbind_:function(){this.efield=null;if(this._drag){this._drag.destroy();this._drag=null}zWatch.unlisten({onSize:this,onShow:this});this.$supers(zul.inp.Slider,"unbind_",arguments)}})})();
zkreg('zul.inp.Slider');zk._m={};
zk._m['sphere']=function(b){var d=this.getZclass(),a=this.inScaleMold()&&!this.isVertical(),c=this.uuid;if(a){b.push('<div id="',c,'" class="',d,'-tick">');this.uuid+="-real"}b.push("<div",this.domAttrs_(),">");if(a){this.uuid=c}b.push('<div id="',c,'-inner" class="',d,'-center">','<div id="',c,'-btn" class="',d,'-btn">',"</div></div></div>");if(a){b.push("</div>")}};
;zk._m['scale']=[zk._p.p.Slider,'sphere'];zk._m['default']=[zk._p.p.Slider,'sphere'];zkmld(zk._p.p.Slider,zk._m);zul.inp.Spinner=zk.$extends(zul.inp.FormatWidget,{_value:0,_step:1,_buttonVisible:true,$define:{step:_zkf=function(){},buttonVisible:function(a){var d=this.$n("btn"),b=this.getZclass();if(!d){return}if(!this.inRoundedMold()){jq(d)[a?"show":"hide"]();jq(this.getInputNode())[a?"removeClass":"addClass"](b+"-right-edge")}else{var c=a?"removeClass":"addClass";jq(d)[c](b+"-btn-right-edge");if(zk.ie6_){jq(d)[c](b+(this._readonly?"-btn-right-edge-readonly":"-btn-right-edge"));if(jq(this.getInputNode()).hasClass(b+"-text-invalid")){jq(d)[c](b+"-btn-right-edge-invalid")}}}this.onSize();return},min:_zkf=function(a){this._min=parseInt(a,10)},max:_zkf},getZclass:function(){var a=this._zclass;return a!=null?a:"z-spinner"+(this.inRoundedMold()?"-rounded":"")},isButtonVisible:function(){return _buttonVisible},intValue:function(){return this.$supers("getValue",arguments)},setConstraint:function(a){if(a!=null){var b=new zul.inp.SimpleSpinnerConstraint(a);this._min=b._min;this._max=b._max;this.$supers("setConstraint",[b])}else{this.$supers("setConstraint",arguments)}},coerceFromString_:function(a){if(!a){return null}var b=zk.fmt.Number.unformat(this._format,a),c=parseInt(b.raw,10);if(b.raw!=""+c&&b.raw!="-"+c){return{error:zk.fmt.Text.format(msgzul.INTEGER_REQUIRED,a)}}if(b.divscale){c=Math.round(c/Math.pow(10,b.divscale))}return c},coerceToString_:function(b){var a=this._format;return a?zk.fmt.Number.format(a,b,this._rounding):b!=null?""+b:""},onSize:_zkf=function(){var a=this.getWidth();if(!a||a.indexOf("%")!=-1){this.getInputNode().style.width=""}this.syncWidth()},onShow:_zkf,onHide:zul.inp.Textbox.onHide,validate:zul.inp.Intbox.validate,doKeyPress_:function(a){if(!this._shallIgnore(a,zul.inp.InputWidget._allowKeys)){this.$supers("doKeyPress_",arguments)}},doKeyDown_:function(a){var b=this.inp;if(b.disabled||b.readOnly){return}switch(a.keyCode){case 38:this.checkValue();this._increase(true);a.stop();return;case 40:this.checkValue();this._increase(false);a.stop();return}this.$supers("doKeyDown_",arguments)},_ondropbtnup:function(a){var b=this.getZclass();jq(this._currentbtn).removeClass(b+"-btn-clk");if(!this.inRoundedMold()){jq(this._currentbtn).removeClass(b+"-btn-up-clk");jq(this._currentbtn).removeClass(b+"-btn-down-clk")}this.domUnlisten_(document.body,"onMouseUp","_ondropbtnup");this._currentbtn=null},_btnDown:function(b){var d=this.inRoundedMold();if(d&&!this._buttonVisible){return}var e;if(!(e=this.inp)||e.disabled){return}var c=this.$n("btn"),h=this.getZclass();if(!zk.dragging){if(this._currentbtn){this.ondropbtnup(b)}jq(c).addClass(h+"-btn-clk");this.domListen_(document.body,"onMouseUp","_ondropbtnup");this._currentbtn=c}this.checkValue();var f=zk(c).revisedOffset(),a=(b.pageY-f[1])<c.offsetHeight/2;if(a){this._increase(true);this._startAutoIncProc(true)}else{this._increase(false);this._startAutoIncProc(false)}var g=d?"":a?"-up":"-down";if((c=this.$n("btn"+g))&&!d){jq(c).addClass(h+"-btn"+g+"-clk");this._currentbtn=c}b.stop()},checkValue:function(){var c=this.inp,b=this._min,a=this._max;if(!c.value){if(b&&a){c.value=(b<=0&&0<=a)?0:b}else{if(b){c.value=b<=0?0:b}else{if(a){c.value=0<=a?0:a}else{c.value=0}}}}},_btnUp:function(b){if(this.inRoundedMold()&&!this._buttonVisible){return}var c=this.inp;if(c.disabled){return}this._onChanging();this._stopAutoIncProc();if(zk.ie){var a=c.value.length;zk(c).setSelectionRange(a,a)}c.focus()},_btnOut:function(a){if(this.inRoundedMold()&&!this._buttonVisible){return}if(this.inp&&!this.inp.disabled&&!zk.dragging){jq(this.$n("btn")).removeClass(this.getZclass()+"-btn-over")}var b=this.inp;if(b.disabled){return}this._stopAutoIncProc()},_btnOver:function(a){if(this.inRoundedMold()&&!this._buttonVisible){return}if(this.inp&&!this.inp.disabled&&!zk.dragging){jq(this.$n("btn")).addClass(this.getZclass()+"-btn-over")}},_increase:function(a){var b=this.inp,c=parseInt(b.value,10);if(a){result=c+this._step}else{result=c-this._step}if(result>Math.pow(2,31)-1){result=Math.pow(2,31)-1}else{if(result<-Math.pow(2,31)){result=-Math.pow(2,31)}}if(this._max!=null&&result>this._max){result=this._max}else{if(this._min!=null&&result<this._min){result=this._min}}b.value=result;this._onChanging()},_clearValue:function(){var a=this.inp;a.value=this._defValue="";return true},_startAutoIncProc:function(a){var b=this;if(this.timerId){clearInterval(this.timerId)}this.timerId=setInterval(function(){b._increase(a)},200)},_stopAutoIncProc:function(){if(this.timerId){clearTimeout(this.timerId)}this.timerId=null},syncWidth:function(){var e=this.$n();if(!zk(e).isRealVisible()||(!this._inplace&&!e.style.width)){return}var g=this.getInputNode(),h=jq(e),f=jq(g),d=this.getInplaceCSS(),i=!e.style.width&&this._inplace;if(this._buttonVisible&&i){h.removeClass(d);f.removeClass(d);if(zk.opera){e.style.width=jq.px0(zk(e).revisedWidth(e.clientWidth)+zk(e).borderWidth())}else{e.style.width=jq.px0(zk(e).revisedWidth(e.offsetWidth))}h.addClass(d);f.addClass(d)}var a=this.inRoundedMold()&&i;if(a){h.removeClass(d);f.removeClass(d)}if(zk.ie6_){g.style.width=jq.px(0)}var b=zk.opera?zk(e).revisedWidth(e.clientWidth)+zk(e).borderWidth():zk(e).revisedWidth(e.offsetWidth),c=this.$n("btn");if(a){h.addClass(d);f.addClass(d)}g.style.width=jq.px0(zk(g).revisedWidth(b-(c?c.offsetWidth:0)))},doFocus_:function(a){var b=this.$n();if(this._inplace){b.style.width=jq.px0(zk(b).revisedWidth(b.offsetWidth))}this.$supers("doFocus_",arguments);if(this._inplace){if(jq(b).hasClass(this.getInplaceCSS())){jq(b).removeClass(this.getInplaceCSS());this.onSize()}}},doBlur_:function(a){var b=this.$n();if(this._inplace&&this._inplaceout){b.style.width=jq.px0(zk(b).revisedWidth(b.offsetWidth))}this.$supers("doBlur_",arguments);if(this._inplace&&this._inplaceout){jq(b).addClass(this.getInplaceCSS());this.onSize();b.style.width=this.getWidth()||""}},afterKeyDown_:function(a){if(this._inplace){jq(this.$n()).toggleClass(this.getInplaceCSS(),a.keyCode==13?null:false)}this.$supers("afterKeyDown_",arguments)},bind_:function(){this.$supers(zul.inp.Spinner,"bind_",arguments);this.timeId=null;var b=this.inp=this.$n("real"),a=this.$n("btn");zWatch.listen({onSize:this,onShow:this});if(this._inplace){jq(b).addClass(this.getInplaceCSS())}if(a){this.domListen_(a,"onMouseDown","_btnDown").domListen_(a,"onMouseUp","_btnUp").domListen_(a,"onMouseOut","_btnOut").domListen_(a,"onMouseOver","_btnOver")}this.syncWidth()},unbind_:function(){if(this.timerId){clearTimeout(this.timerId);this.timerId=null}zWatch.unlisten({onSize:this,onShow:this});var a=this.$n("btn");if(a){this.domUnlisten_(a,"onMouseDown","_btnDown").domUnlisten_(a,"onMouseUp","_btnUp").domUnlisten_(a,"onMouseOut","_btnOut").domUnlisten_(a,"onMouseOver","_btnOver")}this.$supers(zul.inp.Spinner,"unbind_",arguments)}});
zkreg('zul.inp.Spinner');zk._m={};
zk._m['rounded']=function(a){var e=this.getZclass(),d=this.uuid,b=this.inRoundedMold(),c=this._buttonVisible;a.push("<i",this.domAttrs_({text:true}),">",'<input id="',d,'-real"','class="',e,"-inp");if(!c){a.push(" ",e,"-right-edge")}a.push('"',this.textAttrs_(),"/>",'<i id="',d,'-btn"','class="',e,"-btn ");if(b){if(!c){a.push(" ",e,"-btn-right-edge")}if(this._readonly){a.push(" ",e,"-btn-readonly")}if(zk.ie6_&&!c&&this._readonly){a.push(" ",e,"-btn-right-edge-readonly")}}else{if(!c){a.push('" style="display:none"')}}a.push('">');zul.inp.Renderer.renderSpinnerButton(a,this);a.push("</i></i>")};
;zk._m['default']=[zk._p.p.Spinner,'rounded'];zkmld(zk._p.p.Spinner,zk._m);zul.inp.Doublespinner=zk.$extends(zul.inp.FormatWidget,{_value:0,_step:1,_buttonVisible:true,$define:{step:_zkf=function(){},buttonVisible:function(a){var d=this.$n("btn"),b=this.getZclass();if(!d){return}if(!this.inRoundedMold()){jq(d)[a?"show":"hide"]();jq(this.getInputNode())[a?"removeClass":"addClass"](b+"-right-edge")}else{var c=a?"removeClass":"addClass";jq(d)[c](b+"-btn-right-edge");if(zk.ie6_){jq(d)[c](b+(this._readonly?"-btn-right-edge-readonly":"-btn-right-edge"));if(jq(this.getInputNode()).hasClass(b+"-text-invalid")){jq(d)[c](b+"-btn-right-edge-invalid")}}}this.onSize();return},min:_zkf=function(a){this._min=parseFloat(a,10)},max:_zkf},getZclass:function(){var a=this._zclass;return a!=null?a:"z-doublespinner"+(this.inRoundedMold()?"-rounded":"")},isButtonVisible:function(){return _buttonVisible},doubleValue:function(){return this.$supers("getValue",arguments)},setConstraint:function(a){if(a!=null){var b=new zul.inp.SimpleDoubleSpinnerConstraint(a);this._min=b._min;this._max=b._max;this.$supers("setConstraint",[b])}else{this.$supers("setConstraint",arguments)}},coerceFromString_:function(i){var c=zk.fmt.Number.unformat(this._format,i),j=c.raw,b=parseFloat(j),d=""+b,h=d.indexOf("."),f=j.indexOf(".");if(isNaN(b)||d.indexOf("e")<0){if(f==0){j="0"+j;++f}if(f>=0&&j.substring(j.substring(f+1))&&h<0){h=d.length;d+="."}var e=j.length,a=d.length;if(h>=0&&h<f){a-=h;e-=f;for(var g=f-h;g-->0;){d="0"+d}}if(a<e){for(var g=e-a;g-->0;){d+="0"}}if(isNaN(b)||(j!=d&&j!="-"+d&&j.indexOf("e")<0)){return{error:zk.fmt.Text.format(msgzul.NUMBER_REQUIRED,i)}}}if(c.divscale){b=b/Math.pow(10,c.divscale)}return b},coerceToString_:function(b){var a=this._format;return b==null?"":a?zk.fmt.Number.format(a,b,this._rounding):zk.DECIMAL=="."?(""+b):(""+b).replace(".",zk.DECIMAL)},onSize:_zkf=function(){var a=this.getWidth();if(!a||a.indexOf("%")!=-1){this.getInputNode().style.width=""}this.syncWidth()},onShow:_zkf,onHide:zul.inp.Textbox.onHide,validate:zul.inp.Doublebox.validate,doKeyPress_:function(a){if(!this._shallIgnore(a,zul.inp.InputWidget._allowKeys)){this.$supers("doKeyPress_",arguments)}},doKeyDown_:function(a){var b=this.inp;if(b.disabled||b.readOnly){return}switch(a.keyCode){case 38:this.checkValue();this._increase(true);a.stop();return;case 40:this.checkValue();this._increase(false);a.stop();return}this.$supers("doKeyDown_",arguments)},_ondropbtnup:function(a){var b=this.getZclass();jq(this._currentbtn).removeClass(b+"-btn-clk");if(!this.inRoundedMold()){jq(this._currentbtn).removeClass(b+"-btn-up-clk");jq(this._currentbtn).removeClass(b+"-btn-down-clk")}this.domUnlisten_(document.body,"onMouseUp","_ondropbtnup");this._currentbtn=null},_btnDown:function(b){var d=this.inRoundedMold();if(d&&!this._buttonVisible){return}var e;if(!(e=this.inp)||e.disabled){return}var c=this.$n("btn"),h=this.getZclass();if(!zk.dragging){if(this._currentbtn){this.ondropbtnup(b)}jq(c).addClass(h+"-btn-clk");this.domListen_(document.body,"onMouseUp","_ondropbtnup");this._currentbtn=c}this.checkValue();var f=zk(c).revisedOffset(),a=(b.pageY-f[1])<c.offsetHeight/2;if(a){this._increase(true);this._startAutoIncProc(true)}else{this._increase(false);this._startAutoIncProc(false)}var g=d?"":a?"-up":"-down";if((c=this.$n("btn"+g))&&!d){jq(c).addClass(h+"-btn"+g+"-clk");this._currentbtn=c}b.stop()},checkValue:function(){var c=this.inp,b=this._min,a=this._max;if(!c.value){if(b&&a){c.value=(b<=0&&0<=a)?0:b}else{if(b){c.value=b<=0?0:b}else{if(a){c.value=0<=a?0:a}else{c.value=0}}}}},_btnUp:function(b){if(this.inRoundedMold()&&!this._buttonVisible){return}var c=this.inp;if(c.disabled){return}this._onChanging();this._stopAutoIncProc();if(zk.ie){var a=c.value.length;zk(c).setSelectionRange(a,a)}c.focus()},_btnOut:function(a){if(this.inRoundedMold()&&!this._buttonVisible){return}if(this.inp&&!this.inp.disabled&&!zk.dragging){jq(this.$n("btn")).removeClass(this.getZclass()+"-btn-over")}var b=this.inp;if(b.disabled){return}this._stopAutoIncProc()},_btnOver:function(a){if(this.inRoundedMold()&&!this._buttonVisible){return}if(this.inp&&!this.inp.disabled&&!zk.dragging){jq(this.$n("btn")).addClass(this.getZclass()+"-btn-over")}},_increase:function(a){var b=this.inp,c=parseFloat(b.value,10);if(a){result=c+this._step}else{result=c-this._step}if(result>Math.pow(2,63)-1){result=Math.pow(2,63)-1}else{if(result<-Math.pow(2,63)){result=-Math.pow(2,63)}}if(this._max!=null&&result>this._max){result=this._max}else{if(this._min!=null&&result<this._min){result=this._min}}b.value=result;this._onChanging()},_clearValue:function(){var a=this.inp;a.value=this._defValue="";return true},_startAutoIncProc:function(a){var b=this;if(this.timerId){clearInterval(this.timerId)}this.timerId=setInterval(function(){b._increase(a)},200)},_stopAutoIncProc:function(){if(this.timerId){clearTimeout(this.timerId)}this.timerId=null},syncWidth:function(){var e=this.$n();if(!zk(e).isRealVisible()||(!this._inplace&&!e.style.width)){return}var g=this.getInputNode(),h=jq(e),f=jq(g),d=this.getInplaceCSS(),i=!e.style.width&&this._inplace;if(this._buttonVisible&&i){h.removeClass(d);f.removeClass(d);if(zk.opera){e.style.width=jq.px0(zk(e).revisedWidth(e.clientWidth)+zk(e).borderWidth())}else{e.style.width=jq.px0(zk(e).revisedWidth(e.offsetWidth))}h.addClass(d);f.addClass(d)}var a=this.inRoundedMold()&&i;if(a){h.removeClass(d);f.removeClass(d)}if(zk.ie6_){g.style.width=jq.px(0)}var b=zk.opera?zk(e).revisedWidth(e.clientWidth)+zk(e).borderWidth():zk(e).revisedWidth(e.offsetWidth),c=this.$n("btn");if(a){h.addClass(d);f.addClass(d)}g.style.width=jq.px0(zk(g).revisedWidth(b-(c?c.offsetWidth:0)))},doFocus_:function(a){var b=this.$n();if(this._inplace){b.style.width=jq.px0(zk(b).revisedWidth(b.offsetWidth))}this.$supers("doFocus_",arguments);if(this._inplace){if(jq(b).hasClass(this.getInplaceCSS())){jq(b).removeClass(this.getInplaceCSS());this.onSize()}}},doBlur_:function(a){var b=this.$n();if(this._inplace&&this._inplaceout){b.style.width=jq.px0(zk(b).revisedWidth(b.offsetWidth))}this.$supers("doBlur_",arguments);if(this._inplace&&this._inplaceout){jq(b).addClass(this.getInplaceCSS());this.onSize();b.style.width=this.getWidth()||""}},afterKeyDown_:function(a){if(this._inplace){jq(this.$n()).toggleClass(this.getInplaceCSS(),a.keyCode==13?null:false)}this.$supers("afterKeyDown_",arguments)},bind_:function(){this.$supers(zul.inp.Spinner,"bind_",arguments);this.timeId=null;var b=this.inp=this.$n("real"),a=this.$n("btn");zWatch.listen({onSize:this,onShow:this});if(this._inplace){jq(b).addClass(this.getInplaceCSS())}if(a){this.domListen_(a,"onMouseDown","_btnDown").domListen_(a,"onMouseUp","_btnUp").domListen_(a,"onMouseOut","_btnOut").domListen_(a,"onMouseOver","_btnOver")}this.syncWidth()},unbind_:function(){if(this.timerId){clearTimeout(this.timerId);this.timerId=null}zWatch.unlisten({onSize:this,onShow:this});var a=this.$n("btn");if(a){this.domUnlisten_(a,"onMouseDown","_btnDown").domUnlisten_(a,"onMouseUp","_btnUp").domUnlisten_(a,"onMouseOut","_btnOut").domUnlisten_(a,"onMouseOver","_btnOver")}this.$supers(zul.inp.Spinner,"unbind_",arguments)}});
zkreg('zul.inp.Doublespinner');zk._m={};
zk._m['rounded']=[zk._p.p.Spinner,'rounded'];zk._m['default']=[zk._p.p.Spinner,'rounded'];zkmld(zk._p.p.Doublespinner,zk._m);
}finally{zk.setLoaded(zk._p.n);}});zk.setLoaded('zul.inp',1);